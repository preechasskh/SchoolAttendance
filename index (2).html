<!DOCTYPE html>
<html lang="th">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>‡∏£‡∏∞‡∏ö‡∏ö‡πÄ‡∏ä‡πá‡∏Ñ‡∏ä‡∏∑‡πà‡∏≠‡∏ô‡∏±‡∏Å‡πÄ‡∏£‡∏µ‡∏¢‡∏ô - School Attendance System</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .container {
            background: white;
            border-radius: 20px;
            box-shadow: 0 20px 40px rgba(0,0,0,0.1);
            overflow: hidden;
            width: 95%;
            max-width: 1200px;
            min-height: 600px;
        }

        .header {
            background: linear-gradient(45deg, #4f46e5, #7c3aed);
            color: white;
            padding: 20px;
            text-align: center;
            position: relative;
        }

        .header h1 {
            font-size: 2.5rem;
            margin-bottom: 10px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
        }

        .header p {
            font-size: 1.1rem;
            opacity: 0.9;
        }

        .login-section {
            padding: 40px;
            text-align: center;
        }

        .login-form {
            max-width: 400px;
            margin: 0 auto;
        }

        .form-group {
            margin-bottom: 25px;
            text-align: left;
        }

        .form-group label {
            display: block;
            margin-bottom: 8px;
            font-weight: 600;
            color: #374151;
        }

        .form-group select,
        .form-group input {
            width: 100%;
            padding: 12px 16px;
            border: 2px solid #e5e7eb;
            border-radius: 10px;
            font-size: 16px;
            transition: all 0.3s ease;
        }

        .form-group select:focus,
        .form-group input:focus {
            outline: none;
            border-color: #4f46e5;
            box-shadow: 0 0 0 3px rgba(79, 70, 229, 0.1);
        }

        .btn {
            background: linear-gradient(45deg, #4f46e5, #7c3aed);
            color: white;
            border: none;
            padding: 14px 30px;
            border-radius: 10px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            width: 100%;
            margin-top: 10px;
        }

        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 20px rgba(79, 70, 229, 0.3);
        }

        .main-content {
            display: none;
            padding: 30px;
        }

        .nav-tabs {
            display: flex;
            border-bottom: 2px solid #e5e7eb;
            margin-bottom: 30px;
        }

        .nav-tab {
            padding: 15px 25px;
            background: none;
            border: none;
            cursor: pointer;
            font-size: 16px;
            font-weight: 600;
            color: #6b7280;
            border-bottom: 3px solid transparent;
            transition: all 0.3s ease;
        }

        .nav-tab.active {
            color: #4f46e5;
            border-bottom-color: #4f46e5;
        }

        .tab-content {
            display: none;
        }

        .tab-content.active {
            display: block;
        }

        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }

        .stat-card {
            background: white;
            border: 2px solid #e5e7eb;
            border-radius: 15px;
            padding: 25px;
            text-align: center;
            transition: all 0.3s ease;
        }

        .stat-card:hover {
            border-color: #4f46e5;
            transform: translateY(-5px);
            box-shadow: 0 10px 25px rgba(0,0,0,0.1);
        }

        .stat-number {
            font-size: 2.5rem;
            font-weight: bold;
            color: #4f46e5;
            margin-bottom: 10px;
        }

        .stat-label {
            color: #6b7280;
            font-weight: 600;
        }

        .student-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
            gap: 20px;
        }

        .student-card {
            background: white;
            border: 2px solid #e5e7eb;
            border-radius: 15px;
            padding: 20px;
            transition: all 0.3s ease;
        }

        .student-card:hover {
            border-color: #4f46e5;
            transform: translateY(-3px);
            box-shadow: 0 8px 20px rgba(0,0,0,0.1);
        }

        .student-info {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
        }

        .student-name {
            font-weight: 600;
            color: #374151;
        }

        .student-id {
            color: #6b7280;
            font-size: 0.9rem;
        }

        .attendance-status {
            display: flex;
            gap: 10px;
        }

        .status-btn {
            flex: 1;
            padding: 8px 16px;
            border: 2px solid;
            border-radius: 8px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .status-btn.present {
            background: #10b981;
            border-color: #10b981;
            color: white;
        }

        .status-btn.absent {
            background: #ef4444;
            border-color: #ef4444;
            color: white;
        }

        .status-btn.late {
            background: #f59e0b;
            border-color: #f59e0b;
            color: white;
        }

        .status-btn:not(.active) {
            background: white;
            color: #6b7280;
            border-color: #e5e7eb;
        }

        .date-filter {
            display: flex;
            gap: 15px;
            margin-bottom: 20px;
            align-items: end;
        }

        .date-filter .form-group {
            margin-bottom: 0;
        }

        .report-section {
            background: #f9fafb;
            border-radius: 15px;
            padding: 25px;
            margin-top: 20px;
        }

        .report-table {
            width: 100%;
            border-collapse: collapse;
            background: white;
            border-radius: 10px;
            overflow: hidden;
            box-shadow: 0 4px 10px rgba(0,0,0,0.1);
        }

        .report-table th,
        .report-table td {
            padding: 15px;
            text-align: left;
            border-bottom: 1px solid #e5e7eb;
        }

        .report-table th {
            background: #f3f4f6;
            font-weight: 600;
            color: #374151;
        }

        .status-badge {
            padding: 4px 12px;
            border-radius: 20px;
            font-size: 0.85rem;
            font-weight: 600;
        }

        .status-badge.present { background: #d1fae5; color: #065f46; }
        .status-badge.absent { background: #fee2e2; color: #991b1b; }
        .status-badge.late { background: #fef3c7; color: #92400e; }

        .user-info {
            position: absolute;
            top: 20px;
            right: 20px;
            background: rgba(255,255,255,0.2);
            padding: 10px 15px;
            border-radius: 20px;
            font-size: 0.9rem;
        }

        .logout-btn {
            background: rgba(255,255,255,0.2);
            border: 1px solid rgba(255,255,255,0.3);
            color: white;
            padding: 8px 16px;
            border-radius: 15px;
            cursor: pointer;
            margin-left: 10px;
            font-size: 0.9rem;
        }

        .logout-btn:hover {
            background: rgba(255,255,255,0.3);
        }

        @media (max-width: 768px) {
            .container {
                width: 100%;
                margin: 10px;
                border-radius: 10px;
            }
            
            .header h1 {
                font-size: 1.8rem;
            }
            
            .nav-tabs {
                flex-wrap: wrap;
            }
            
            .date-filter {
                flex-direction: column;
            }
            
            .student-grid {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>üìö ‡∏£‡∏∞‡∏ö‡∏ö‡πÄ‡∏ä‡πá‡∏Ñ‡∏ä‡∏∑‡πà‡∏≠‡∏ô‡∏±‡∏Å‡πÄ‡∏£‡∏µ‡∏¢‡∏ô</h1>
            <p>School Attendance Management System</p>
            <div class="user-info" id="userInfo" style="display: none;">
                <span id="currentUser"></span>
                <button class="logout-btn" onclick="logout()">‡∏≠‡∏≠‡∏Å‡∏à‡∏≤‡∏Å‡∏£‡∏∞‡∏ö‡∏ö</button>
            </div>
        </div>

        <!-- Login Section -->
        <div class="login-section" id="loginSection">
            <h2 style="margin-bottom: 30px; color: #374151;">‡πÄ‡∏Ç‡πâ‡∏≤‡∏™‡∏π‡πà‡∏£‡∏∞‡∏ö‡∏ö</h2>
            <div class="login-form">
                <div class="form-group">
                    <label for="userType">‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ:</label>
                    <select id="userType">
                        <option value="">‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ</option>
                        <option value="teacher1">‡∏≠‡∏≤‡∏à‡∏≤‡∏£‡∏¢‡πå‡∏™‡∏°‡∏ä‡∏≤‡∏¢ ‡∏ß‡∏á‡∏®‡πå‡∏î‡∏µ (TCH001)</option>
                        <option value="teacher2">‡∏≠‡∏≤‡∏à‡∏≤‡∏£‡∏¢‡πå‡∏ß‡∏ô‡∏¥‡∏î‡∏≤ ‡πÉ‡∏à‡∏™‡∏ß‡∏¢ (TCH002)</option>
                        <option value="admin">‡∏ú‡∏π‡πâ‡∏≠‡∏≥‡∏ô‡∏ß‡∏¢‡∏Å‡∏≤‡∏£‡∏™‡∏∏‡∏£‡∏ä‡∏±‡∏¢ ‡∏°‡∏±‡πà‡∏ô‡∏Ñ‡∏á (ADM001)</option>
                    </select>
                </div>
                <div class="form-group">
                    <label for="password">‡∏£‡∏´‡∏±‡∏™‡∏ú‡πà‡∏≤‡∏ô:</label>
                    <input type="password" id="password" placeholder="‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡πÉ‡∏™‡πà‡∏£‡∏´‡∏±‡∏™‡∏ú‡πà‡∏≤‡∏ô">
                </div>
                <button class="btn" onclick="login()">‡πÄ‡∏Ç‡πâ‡∏≤‡∏™‡∏π‡πà‡∏£‡∏∞‡∏ö‡∏ö</button>
            </div>
        </div>

        <!-- Main Content -->
        <div class="main-content" id="mainContent">
            <div class="nav-tabs">
                <button class="nav-tab active" onclick="showTab('dashboard')">‡πÅ‡∏î‡∏ä‡∏ö‡∏≠‡∏£‡πå‡∏î</button>
                <button class="nav-tab" onclick="showTab('attendance')">‡πÄ‡∏ä‡πá‡∏Ñ‡∏ä‡∏∑‡πà‡∏≠</button>
                <button class="nav-tab" onclick="showTab('reports')">‡∏£‡∏≤‡∏¢‡∏á‡∏≤‡∏ô</button>
                <button class="nav-tab" onclick="showTab('students')">‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏ô‡∏±‡∏Å‡πÄ‡∏£‡∏µ‡∏¢‡∏ô</button>
            </div>

            <!-- Dashboard Tab -->
            <div class="tab-content active" id="dashboard">
                <h2 style="margin-bottom: 20px; color: #374151;">‡πÅ‡∏îÿ¥‡∏ö‡∏≠‡∏£‡πå‡∏î‡∏™‡∏£‡∏∏‡∏õ</h2>
                <div class="stats-grid">
                    <div class="stat-card">
                        <div class="stat-number" id="totalStudents">120</div>
                        <div class="stat-label">‡∏ô‡∏±‡∏Å‡πÄ‡∏£‡∏µ‡∏¢‡∏ô‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-number" id="presentToday">95</div>
                        <div class="stat-label">‡∏°‡∏≤‡πÄ‡∏£‡∏µ‡∏¢‡∏ô‡∏ß‡∏±‡∏ô‡∏ô‡∏µ‡πâ</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-number" id="absentToday">15</div>
                        <div class="stat-label">‡∏Ç‡∏≤‡∏î‡πÄ‡∏£‡∏µ‡∏¢‡∏ô‡∏ß‡∏±‡∏ô‡∏ô‡∏µ‡πâ</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-number" id="lateToday">10</div>
                        <div class="stat-label">‡∏°‡∏≤‡∏™‡∏≤‡∏¢‡∏ß‡∏±‡∏ô‡∏ô‡∏µ‡πâ</div>
                    </div>
                </div>
                
                <div class="report-section">
                    <h3 style="margin-bottom: 15px; color: #374151;">‡∏™‡∏ñ‡∏¥‡∏ï‡∏¥‡∏Å‡∏≤‡∏£‡πÄ‡∏Ç‡πâ‡∏≤‡πÄ‡∏£‡∏µ‡∏¢‡∏ô 7 ‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà‡∏ú‡πà‡∏≤‡∏ô‡∏°‡∏≤</h3>
                    <canvas id="attendanceChart" width="400" height="200"></canvas>
                </div>
            </div>

            <!-- Attendance Tab -->
            <div class="tab-content" id="attendance">
                <h2 style="margin-bottom: 20px; color: #374151;">‡πÄ‡∏ä‡πá‡∏Ñ‡∏ä‡∏∑‡πà‡∏≠‡∏ô‡∏±‡∏Å‡πÄ‡∏£‡∏µ‡∏¢‡∏ô</h2>
                
                <div class="date-filter">
                    <div class="form-group">
                        <label for="classSelect">‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏´‡πâ‡∏≠‡∏á‡πÄ‡∏£‡∏µ‡∏¢‡∏ô:</label>
                        <select id="classSelect" onchange="loadStudents()">
                            <option value="M1">‡∏ä‡∏±‡πâ‡∏ô ‡∏°.1</option>
                            <option value="M2">‡∏ä‡∏±‡πâ‡∏ô ‡∏°.2</option>
                            <option value="M3">‡∏ä‡∏±‡πâ‡∏ô ‡∏°.3</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="attendanceDate">‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà:</label>
                        <input type="date" id="attendanceDate">
                    </div>
                    <button class="btn" onclick="saveAttendance()" style="width: auto; padding: 12px 25px;">‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏Å‡∏≤‡∏£‡πÄ‡∏Ç‡πâ‡∏≤‡πÄ‡∏£‡∏µ‡∏¢‡∏ô</button>
                </div>

                <div class="student-grid" id="studentGrid">
                    <!-- Students will be loaded here -->
                </div>
            </div>

            <!-- Reports Tab -->
            <div class="tab-content" id="reports">
                <h2 style="margin-bottom: 20px; color: #374151;">‡∏£‡∏≤‡∏¢‡∏á‡∏≤‡∏ô‡∏Å‡∏≤‡∏£‡πÄ‡∏Ç‡πâ‡∏≤‡πÄ‡∏£‡∏µ‡∏¢‡∏ô</h2>
                
                <div class="date-filter">
                    <div class="form-group">
                        <label for="reportType">‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó‡∏£‡∏≤‡∏¢‡∏á‡∏≤‡∏ô:</label>
                        <select id="reportType">
                            <option value="daily">‡∏£‡∏≤‡∏¢‡∏ß‡∏±‡∏ô</option>
                            <option value="monthly">‡∏£‡∏≤‡∏¢‡πÄ‡∏î‡∏∑‡∏≠‡∏ô</option>
                            <option value="yearly">‡∏£‡∏≤‡∏¢‡∏õ‡∏µ</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="reportClass">‡∏´‡πâ‡∏≠‡∏á‡πÄ‡∏£‡∏µ‡∏¢‡∏ô:</label>
                        <select id="reportClass">
                            <option value="all">‡∏ó‡∏∏‡∏Å‡∏´‡πâ‡∏≠‡∏á</option>
                            <option value="M1">‡∏ä‡∏±‡πâ‡∏ô ‡∏°.1</option>
                            <option value="M2">‡∏ä‡∏±‡πâ‡∏ô ‡∏°.2</option>
                            <option value="M3">‡∏ä‡∏±‡πâ‡∏ô ‡∏°.3</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="reportDate">‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà:</label>
                        <input type="date" id="reportDate">
                    </div>
                    <button class="btn" onclick="generateReport()" style="width: auto; padding: 12px 25px;">‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏£‡∏≤‡∏¢‡∏á‡∏≤‡∏ô</button>
                    <button class="btn" onclick="exportReport()" style="width: auto; padding: 12px 25px; margin-left: 10px; background: #10b981;">‡∏™‡πà‡∏á‡∏≠‡∏≠‡∏Å Excel</button>
                </div>

                <div class="report-section">
                    <table class="report-table" id="reportTable">
                        <thead>
                            <tr>
                                <th>‡∏£‡∏´‡∏±‡∏™‡∏ô‡∏±‡∏Å‡πÄ‡∏£‡∏µ‡∏¢‡∏ô</th>
                                <th>‡∏ä‡∏∑‡πà‡∏≠-‡∏ô‡∏≤‡∏°‡∏™‡∏Å‡∏∏‡∏•</th>
                                <th>‡∏´‡πâ‡∏≠‡∏á</th>
                                <th>‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà</th>
                                <th>‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞</th>
                                <th>‡πÄ‡∏ß‡∏•‡∏≤</th>
                            </tr>
                        </thead>
                        <tbody id="reportTableBody">
                            <!-- Report data will be loaded here -->
                        </tbody>
                    </table>
                </div>
            </div>

            <!-- Students Management Tab -->
            <div class="tab-content" id="students">
                <h2 style="margin-bottom: 20px; color: #374151;">‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ô‡∏±‡∏Å‡πÄ‡∏£‡∏µ‡∏¢‡∏ô</h2>
                
                <div class="date-filter">
                    <div class="form-group">
                        <label for="studentId">‡∏£‡∏´‡∏±‡∏™‡∏ô‡∏±‡∏Å‡πÄ‡∏£‡∏µ‡∏¢‡∏ô:</label>
                        <input type="text" id="studentId" placeholder="‡∏Å‡∏£‡∏≠‡∏Å‡∏£‡∏´‡∏±‡∏™‡∏ô‡∏±‡∏Å‡πÄ‡∏£‡∏µ‡∏¢‡∏ô">
                    </div>
                    <div class="form-group">
                        <label for="studentName">‡∏ä‡∏∑‡πà‡∏≠-‡∏ô‡∏≤‡∏°‡∏™‡∏Å‡∏∏‡∏•:</label>
                        <input type="text" id="studentName" placeholder="‡∏Å‡∏£‡∏≠‡∏Å‡∏ä‡∏∑‡πà‡∏≠-‡∏ô‡∏≤‡∏°‡∏™‡∏Å‡∏∏‡∏•">
                    </div>
                    <div class="form-group">
                        <label for="studentClass">‡∏´‡πâ‡∏≠‡∏á‡πÄ‡∏£‡∏µ‡∏¢‡∏ô:</label>
                        <select id="studentClass">
                            <option value="M1">‡∏ä‡∏±‡πâ‡∏ô ‡∏°.1</option>
                            <option value="M2">‡∏ä‡∏±‡πâ‡∏ô ‡∏°.2</option>
                            <option value="M3">‡∏ä‡∏±‡πâ‡∏ô ‡∏°.3</option>
                        </select>
                    </div>
                    <button class="btn" onclick="addStudent()" style="width: auto; padding: 12px 25px;">‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏ô‡∏±‡∏Å‡πÄ‡∏£‡∏µ‡∏¢‡∏ô</button>
                </div>

                <div class="report-section">
                    <table class="report-table">
                        <thead>
                            <tr>
                                <th>‡∏£‡∏´‡∏±‡∏™‡∏ô‡∏±‡∏Å‡πÄ‡∏£‡∏µ‡∏¢‡∏ô</th>
                                <th>‡∏ä‡∏∑‡πà‡∏≠-‡∏ô‡∏≤‡∏°‡∏™‡∏Å‡∏∏‡∏•</th>
                                <th>‡∏´‡πâ‡∏≠‡∏á</th>
                                <th>‡∏Å‡∏≤‡∏£‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£</th>
                            </tr>
                        </thead>
                        <tbody id="studentsTableBody">
                            <!-- Students data will be loaded here -->
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Sample data
        let studentsData = {
            M1: [
                {id: 'M1001', name: '‡∏ô‡∏≤‡∏¢‡∏™‡∏°‡∏ä‡∏≤‡∏¢ ‡πÉ‡∏à‡∏î‡∏µ', class: 'M1'},
                {id: 'M1002', name: '‡∏ô‡∏≤‡∏á‡∏™‡∏≤‡∏ß‡∏™‡∏°‡πÉ‡∏™ ‡∏°‡∏µ‡∏™‡∏∏‡∏Ç', class: 'M1'},
                {id: 'M1003', name: '‡∏ô‡∏≤‡∏¢‡∏ß‡∏¥‡∏ä‡∏±‡∏¢ ‡πÄ‡∏Å‡πà‡∏á‡∏Å‡∏•‡πâ‡∏≤', class: 'M1'},
                {id: 'M1004', name: '‡∏ô‡∏≤‡∏á‡∏™‡∏≤‡∏ß‡∏°‡∏≤‡∏•‡∏µ ‡∏™‡∏ß‡∏¢‡∏á‡∏≤‡∏°', class: 'M1'},
                {id: 'M1005', name: '‡∏ô‡∏≤‡∏¢‡∏™‡∏∏‡∏£‡∏ä‡∏±‡∏¢ ‡∏°‡∏±‡πà‡∏ô‡∏Ñ‡∏á', class: 'M1'}
            ],
            M2: [
                {id: 'M2001', name: '‡∏ô‡∏≤‡∏¢‡∏ä‡∏±‡∏¢‡∏ß‡∏±‡∏í‡∏ô‡πå ‡πÄ‡∏à‡∏£‡∏¥‡∏ç', class: 'M2'},
                {id: 'M2002', name: '‡∏ô‡∏≤‡∏á‡∏™‡∏≤‡∏ß‡∏à‡∏¥‡∏£‡∏û‡∏£ ‡∏°‡∏µ‡∏ä‡∏±‡∏¢', class: 'M2'},
                {id: 'M2003', name: '‡∏ô‡∏≤‡∏¢‡∏û‡∏¥‡∏ä‡∏±‡∏¢ ‡∏Å‡∏•‡πâ‡∏≤‡∏´‡∏≤‡∏ç', class: 'M2'},
                {id: 'M2004', name: '‡∏ô‡∏≤‡∏á‡∏™‡∏≤‡∏ß‡∏õ‡∏ó‡∏∏‡∏°‡∏û‡∏£ ‡∏á‡∏î‡∏á‡∏≤‡∏°', class: 'M2'},
                {id: 'M2005', name: '‡∏ô‡∏≤‡∏¢‡∏ò‡∏ô‡∏ß‡∏±‡∏í‡∏ô‡πå ‡∏â‡∏•‡∏≤‡∏î', class: 'M2'}
            ],
            M3: [
                {id: 'M3001', name: '‡∏ô‡∏≤‡∏¢‡∏£‡∏±‡∏ä‡∏û‡∏• ‡πÅ‡∏™‡∏á‡πÉ‡∏™', class: 'M3'},
                {id: 'M3002', name: '‡∏ô‡∏≤‡∏á‡∏™‡∏≤‡∏ß‡∏ì‡∏¥‡∏ä‡∏≤‡∏û‡∏£ ‡∏£‡∏∏‡πà‡∏á‡πÄ‡∏£‡∏∑‡∏≠‡∏á', class: 'M3'},
                {id: 'M3003', name: '‡∏ô‡∏≤‡∏¢‡∏ò‡∏µ‡∏£‡∏û‡∏á‡∏©‡πå ‡πÄ‡∏™‡∏≤‡∏∞‡πÅ‡∏™‡∏á', class: 'M3'},
                {id: 'M3004', name: '‡∏ô‡∏≤‡∏á‡∏™‡∏≤‡∏ß‡∏ô‡∏†‡∏≤‡∏û‡∏£ ‡∏ô‡∏ß‡∏•‡πÉ‡∏™', class: 'M3'},
                {id: 'M3005', name: '‡∏ô‡∏≤‡∏¢‡∏ß‡∏±‡∏í‡∏ô‡∏≤ ‡∏≠‡∏≤‡∏ó‡∏£', class: 'M3'}
            ]
        };

        let attendanceData = {};
        let currentUser = null;

        // Initialize
        document.addEventListener('DOMContentLoaded', function() {
            document.getElementById('attendanceDate').value = new Date().toISOString().split('T')[0];
            document.getElementById('reportDate').value = new Date().toISOString().split('T')[0];
            loadAllStudents();
        });

        // Login function
        function login() {
            const userType = document.getElementById('userType').value;
            const password = document.getElementById('password').value;
            
            const credentials = {
                'teacher1': 'smart123',
                'teacher2': 'teach456',
                'admin': 'admin789'
            };

            if (userType && credentials[userType] === password) {
                currentUser = userType;
                document.getElementById('loginSection').style.display = 'none';
                document.getElementById('mainContent').style.display = 'block';
                document.getElementById('userInfo').style.display = 'block';
                
                const userNames = {
                    'teacher1': '‡∏≠‡∏≤‡∏à‡∏≤‡∏£‡∏¢‡πå‡∏™‡∏°‡∏ä‡∏≤‡∏¢ ‡∏ß‡∏á‡∏®‡πå‡∏î‡∏µ',
                    'teacher2': '‡∏≠‡∏≤‡∏à‡∏≤‡∏£‡∏¢‡πå‡∏ß‡∏ô‡∏¥‡∏î‡∏≤ ‡πÉ‡∏à‡∏™‡∏ß‡∏¢',
                    'admin': '‡∏ú‡∏π‡πâ‡∏≠‡∏≥‡∏ô‡∏ß‡∏¢‡∏Å‡∏≤‡∏£‡∏™‡∏∏‡∏£‡∏ä‡∏±‡∏¢ ‡∏°‡∏±‡πà‡∏ô‡∏Ñ‡∏á'
                };
                
                document.getElementById('currentUser').textContent = userNames[userType];
                
                // Hide students management tab for teachers
                if (userType !== 'admin') {
                    document.querySelector('[onclick="showTab(\'students\')"]').style.display = 'none';
                }
                
                updateDashboard();
                loadStudents();
            } else {
                alert('‡∏ä‡∏∑‡πà‡∏≠‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ‡∏´‡∏£‡∏∑‡∏≠‡∏£‡∏´‡∏±‡∏™‡∏ú‡πà‡∏≤‡∏ô‡πÑ‡∏°‡πà‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á');
            }
        }

        // Logout function
        function logout() {
            currentUser = null;
            document.getElementById('loginSection').style.display = 'block';
            document.getElementById('mainContent').style.display = 'none';
            document.getElementById('userInfo').style.display = 'none';
            document.getElementById('userType').value = '';
            document.getElementById('password').value = '';
        }

        // Tab navigation
        function showTab(tabName) {
            // Hide all tabs
            document.querySelectorAll('.tab-content').forEach(tab => {
                tab.classList.remove('active');
            });
            document.querySelectorAll('.nav-tab').forEach(tab => {
                tab.classList.remove('active');
            });

            // Show selected tab
            document.getElementById(tabName).classList.add('active');
            event.target.classList.add('active');

            if (tabName === 'reports') {
                generateReport();
            }
        }

        // Load students for attendance
        function loadStudents() {
            const selectedClass = document.getElementById('classSelect').value;
            const students = studentsData[selectedClass] || [];
            const studentGrid = document.getElementById('studentGrid');
            
            studentGrid.innerHTML = '';
            
            students.forEach(student => {
                const studentCard = createStudentCard(student);
                studentGrid.appendChild(studentCard);
            });
        }

        // Create student card
        function createStudentCard(student) {
            const card = document.createElement('div');
            card.className = 'student-card';
            card.innerHTML = `
                <div class="student-info">
                    <div>
                        <div class="student-name">${student.name}</div>
                        <div class="student-id">${student.id}</div>
                    </div>
                </div>
                <div class="attendance-status">
                    <button class="status-btn present" onclick="setAttendance('${student.id}', 'present', this)">‡∏°‡∏≤‡πÄ‡∏£‡∏µ‡∏¢‡∏ô</button>
                    <button class="status-btn absent" onclick="setAttendance('${student.id}', 'absent', this)">‡∏Ç‡∏≤‡∏î‡πÄ‡∏£‡∏µ‡∏¢‡∏ô</button>
                    <button class="status-btn late" onclick="setAttendance('${student.id}', 'late', this)">‡∏°‡∏≤‡∏™‡∏≤‡∏¢</button>
                </div>
            `;
            return card;
        }

        // Set attendance status
        function setAttendance(studentId, status, button) {
            const date = document.getElementById('attendanceDate').value;
            const time = new Date().toLocaleTimeString('th-TH');
            
            if (!attendanceData[date]) {
                attendanceData[date] = {};
            }
            
            attendanceData[date][studentId] = {
                status: status,
                time: time
            };

            // Update button styles
            const card = button.closest('.student-card');
            const buttons = card.querySelectorAll('.status-btn');
            buttons.forEach(btn => btn.classList.remove('active'));
            button.classList.add('active');
        }

        // Save attendance
        function saveAttendance() {
            alert('‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏Å‡∏≤‡∏£‡πÄ‡∏Ç‡πâ‡∏≤‡πÄ‡∏£‡∏µ‡∏¢‡∏ô‡πÄ‡∏£‡∏µ‡∏¢‡∏ö‡∏£‡πâ‡∏≠‡∏¢‡πÅ‡∏•‡πâ‡∏ß');
            updateDashboard();
        }

        // Update dashboard
        function updateDashboard() {
            const today = new Date().toISOString().split('T')[0];
            const todayData = attendanceData[today] || {};
            
            let present = 0, absent = 0, late = 0;
            let total = 0;
            
            Object.values(studentsData).forEach(classStudents => {
                total += classStudents.length;
                classStudents.forEach(student => {
                    const attendance = todayData[student.id];
                    if (attendance) {
                        if (attendance.status === 'present') present++;
                        else if (attendance.status === 'absent') absent++;
                        else if (attendance.status === 'late') late++;
                    } else {
                        absent++; // Default to absent if not marked
                    }
                });
            });

            document.getElementById('totalStudents').textContent = total;
            document.getElementById('presentToday').textContent = present;
            document.getElementById('absentToday').textContent = absent;
            document.getElementById('lateToday').textContent = late;
        }

        // Generate report
        function generateReport() {
            const reportType = document.getElementById('reportType').value;
            const reportClass = document.getElementById('reportClass').value;
            const reportDate = document.getElementById('reportDate').value;
            
            const tableBody = document.getElementById('reportTableBody');
            tableBody.innerHTML = '';

            const students = reportClass === 'all' ? 
                Object.values(studentsData).flat() : 
                studentsData[reportClass] || [];

            students.forEach(student => {
                const attendance = attendanceData[reportDate] && attendanceData[reportDate][student.id];
                const status = attendance ? attendance.status : 'absent';
                const time = attendance ? attendance.time : '-';
                
                const row = document.createElement('tr');
                row.innerHTML = `
                    <td>${student.id}</td>
                    <td>${student.name}</td>
                    <td>${student.class}</td>
                    <td>${reportDate}</td>
                    <td><span class="status-badge ${status}">${getStatusText(status)}</span></td>
                    <td>${time}</td>
                `;
                tableBody.appendChild(row);
            });
        }

        // Get status text in Thai
        function getStatusText(status) {
            const statusMap = {
                'present': '‡∏°‡∏≤‡πÄ‡∏£‡∏µ‡∏¢‡∏ô',
                'absent': '‡∏Ç‡∏≤‡∏î‡πÄ‡∏£‡∏µ‡∏¢‡∏ô',
                'late': '‡∏°‡∏≤‡∏™‡∏≤‡∏¢'
            };
            return statusMap[status] || '‡∏Ç‡∏≤‡∏î‡πÄ‡∏£‡∏µ‡∏¢‡∏ô';
        }

        // Export report
        function exportReport() {
            alert('‡∏™‡πà‡∏á‡∏≠‡∏≠‡∏Å‡∏£‡∏≤‡∏¢‡∏á‡∏≤‡∏ô‡πÄ‡∏õ‡πá‡∏ô Excel ‡πÄ‡∏£‡∏µ‡∏¢‡∏ö‡∏£‡πâ‡∏≠‡∏¢‡πÅ‡∏•‡πâ‡∏ß');
        }

        // Add student (Admin only)
        function addStudent() {
            if (currentUser !== 'admin') {
                alert('‡∏Ñ‡∏∏‡∏ì‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏™‡∏¥‡∏ó‡∏ò‡∏¥‡πå‡πÉ‡∏ô‡∏Å‡∏≤‡∏£‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏ô‡∏±‡∏Å‡πÄ‡∏£‡∏µ‡∏¢‡∏ô');
                return;
            }

            const id = document.getElementById('studentId').value;
            const name = document.getElementById('studentName').value;
            const studentClass = document.getElementById('studentClass').value;

            if (id && name && studentClass) {
                if (!studentsData[studentClass]) {
                    studentsData[studentClass] = [];
                }

                studentsData[studentClass].push({
                    id: id,
                    name: name,
                    class: studentClass
                });

                document.getElementById('studentId').value = '';
                document.getElementById('studentName').value = '';
                
                loadAllStudents();
                alert('‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏ô‡∏±‡∏Å‡πÄ‡∏£‡∏µ‡∏¢‡∏ô‡πÄ‡∏£‡∏µ‡∏¢‡∏ö‡∏£‡πâ‡∏≠‡∏¢‡πÅ‡∏•‡πâ‡∏ß');
            } else {
                alert('‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏Å‡∏£‡∏≠‡∏Å‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÉ‡∏´‡πâ‡∏Ñ‡∏£‡∏ö‡∏ñ‡πâ‡∏ß‡∏ô');
            }
        }

        // Load all students for management
        function loadAllStudents() {
            const tableBody = document.getElementById('studentsTableBody');
            tableBody.innerHTML = '';

            Object.values(studentsData).flat().forEach(student => {
                const row = document.createElement('tr');
                row.innerHTML = `
                    <td>${student.id}</td>
                    <td>${student.name}</td>
                    <td>${student.class}</td>
                    <td>
                        <button onclick="editStudent('${student.id}')" style="background: #f59e0b; color: white; border: none; padding: 5px 10px; border-radius: 5px; margin-right: 5px;">‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç</button>
                        <button onclick="deleteStudent('${student.id}')" style="background: #ef4444; color: white; border: none; padding: 5px 10px; border-radius: 5px;">‡∏•‡∏ö</button>
                    </td>
                `;
                tableBody.appendChild(row);
            });
        }

        // Edit student
        function editStudent(studentId) {
            alert('‡∏ü‡∏µ‡πÄ‡∏à‡∏≠‡∏£‡πå‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ô‡∏±‡∏Å‡πÄ‡∏£‡∏µ‡∏¢‡∏ô (‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏û‡∏±‡∏í‡∏ô‡∏≤)');
        }

        // Delete student
        function deleteStudent(studentId) {
            if (currentUser !== 'admin') {
                alert('‡∏Ñ‡∏∏‡∏ì‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏™‡∏¥‡∏ó‡∏ò‡∏¥‡πå‡πÉ‡∏ô‡∏Å‡∏≤‡∏£‡∏•‡∏ö‡∏ô‡∏±‡∏Å‡πÄ‡∏£‡∏µ‡∏¢‡∏ô');
                return;
            }

            if (confirm('‡∏Ñ‡∏∏‡∏ì‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡∏•‡∏ö‡∏ô‡∏±‡∏Å‡πÄ‡∏£‡∏µ‡∏¢‡∏ô‡∏Ñ‡∏ô‡∏ô‡∏µ‡πâ‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà?')) {
                Object.keys(studentsData).forEach(classKey => {
                    studentsData[classKey] = studentsData[classKey].filter(student => student.id !== studentId);
                });
                loadAllStudents();
                alert('‡∏•‡∏ö‡∏ô‡∏±‡∏Å‡πÄ‡∏£‡∏µ‡∏¢‡∏ô‡πÄ‡∏£‡∏µ‡∏¢‡∏ö‡∏£‡πâ‡∏≠‡∏¢‡πÅ‡∏•‡πâ‡∏ß');
            }
        }
    </script>
</body>
</html>